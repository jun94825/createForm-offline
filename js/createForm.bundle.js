!function(e){var n={};function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=n,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)i.d(t,o,function(n){return e[n]}.bind(null,o));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="",i(i.s=0)}([function(e,n,i){"use strict";i.r(n);var t=Vue.extend({props:["question","index"],template:'\n    <div class="form-question" v-if="display">\n      <div class="form-question" v-if="display">\n        <div class="question-title" @mousemove="showEdit(question.Guid)" @mouseout="hideEdit(question.Guid)">\n          <p class="required" v-if="question.Required">*</p>\n          <h4>{{ index + 1}}. {{ question.Title }}</h4>\n          <p class="edit" :data-key="question.Guid" @click="edit(question)">Edit</p>\n        </div>\n        <div\n          class="question-option"\n          v-for="(item, index) in question.Options"\n          :key="index"\n          @mousemove="showBinding(item)"\n          @mouseout="hideBinding(item)"\n        >\n          <input\n            :type="question.Type"\n            :id="item.Guid"\n            :value="item.Guid"\n            v-model="question.Answer"\n            @change="checkBinding(question, item)"\n          />\n          <label :for="item.Guid">{{ item.Value }}</label>\n          <p class="binding" :data-key="item.Guid" @click="binding(item)"\n            >Binding</p\n          >\n        </div>\n      </div>\n    </div>\n  ',data:function(){return{display:!0}},methods:{showBinding:function(e){document.querySelector('p[data-key="'.concat(e.Guid,'"]')).style.display="block"},hideBinding:function(e){document.querySelector('p[data-key="'.concat(e.Guid,'"]')).style.display="none"},binding:function(e){var n=prompt();null!==n&&e.Binding.push(n)},showEdit:function(e){document.querySelector('p[data-key="'.concat(e,'"]')).style.display="block"},hideEdit:function(e){document.querySelector('p[data-key="'.concat(e,'"]')).style.display="none"},edit:function(e){var n=this;this.$root.$children[0].form.Questions.forEach((function(i,t,o){e.Guid===i.Guid&&(i.index=t,n.$root.$children[0].current=i,o.splice(t,1))}))}},mounted:function(){var e=this;eventBus.$on("connect",(function(n){n.Guid===e.question.Guid&&(e.display=n.status)}))}}),o=(Vue.component("radio",{watch:{display:function(){this.display||(this.question.Answer="",this.question.Options.forEach((function(e){e.Binding.length>0&&e.Binding.forEach((function(e){eventBus.$emit("connect",{Guid:e,status:!1})}))})))}},methods:{checkBinding:function(e,n){n.Binding.length>0&&n.Binding.forEach((function(e){eventBus.$emit("connect",{Guid:e,status:!0})})),e.Options.forEach((function(e){e.Binding.length>0&&e.Guid!==n.Guid&&e.Binding.forEach((function(e){eventBus.$emit("connect",{Guid:e,status:!1})}))}))}},extends:t}),Vue.component("checkbox",{watch:{display:function(){this.display||(this.question.Answer=[],this.question.Options.forEach((function(e){e.Binding.length>0&&e.Binding.forEach((function(e){eventBus.$emit("connect",{Guid:e,status:!1})}))})))}},methods:{checkBinding:function(e,n){n.Binding.length>0&&n.Binding.forEach((function(i){0===e.Answer.length?eventBus.$emit("connect",{Guid:i,status:!1}):e.Answer.forEach((function(e){e===n.Guid?eventBus.$emit("connect",{Guid:i,status:!0}):eventBus.$emit("connect",{Guid:i,status:!1})}))}))}},extends:t}),Vue.extend({props:["question","index"],data:function(){return{display:!0}},watch:{display:function(){this.display||(this.question.Answer="")}},methods:{edit:function(e){var n=this;this.$root.$children[0].form.Questions.forEach((function(i,t,o){e.Guid===i.Guid&&(i.index=t,n.$root.$children[0].current=i,o.splice(t,1))}))},showEdit:function(e){document.querySelector('p[data-key="'.concat(e,'"]')).style.display="block"},hideEdit:function(e){document.querySelector('p[data-key="'.concat(e,'"]')).style.display="none"}},mounted:function(){var e=this;eventBus.$on("connect",(function(n){n.Guid===e.question.Guid&&(e.display=n.status)}))}}));Vue.component("dropdown",{template:'\n    <div class="form-question" v-if="display">\n      <div class="question-title" @mousemove="showEdit(question.Guid)" @mouseout="hideEdit(question.Guid)">\n        <p class="required" v-if="question.Required">*</p>\n        <h4>{{ index + 1}}. {{ question.Title }}</h4>\n        <p class="edit" :data-key="question.Guid" @click="edit(question)">Edit</p>\n      </div>\n      <select v-model="question.Answer">\n        <option value="">請選擇</option>\n        <option\n          v-for="(item, index) in question.Options"\n          :key="index"\n          :value="item.Guid"\n          >{{ item.Value }}</option\n        >\n      </select>\n    </div>\n  ',extends:o}),Vue.component("literal",{template:'\n    <div class="form-question" v-if="display">\n      <div class="question-title" @mousemove="showEdit(question.Guid)" @mouseout="hideEdit(question.Guid)">\n        <p class="required" v-if="question.Required">*</p>\n        <h4>{{ index + 1}}. {{ question.Title }}</h4>\n        <p class="edit" :data-key="question.Guid" @click="edit(question)">Edit</p>\n      </div>\n      \n      <div class="input literal">\n        <input type="text" v-model="question.Answer" placeholder="您的回答" />\n        <div class="line"></div>\n      </div>\n    </div>\n  ',extends:o}),Vue.component("date",{template:'\n    <div class="form-question" v-if="display">\n      <div class="question-title" @mousemove="showEdit(question.Guid)" @mouseout="hideEdit(question.Guid)">\n        <p class="required" v-if="question.Required">*</p>\n        <h4>{{ index + 1}}. {{ question.Title }}</h4>\n        <p class="edit" :data-key="question.Guid" @click="edit(question)">Edit</p>\n      </div>\n      \n      <div class="input literal">\n        <input type="date" class="date form-control" v-model="question.Answer" />\n      </div>\n    </div>\n  ',extends:o}),Vue.component("number",{template:'\n    <div class="form-question" v-if="display">\n      <div class="question-title" @mousemove="showEdit(question.Guid)" @mouseout="hideEdit(question.Guid)">\n        <p class="required" v-if="question.Required">*</p>\n        <h4>{{ index + 1}}. {{ question.Title }}</h4>\n        <p class="edit" :data-key="question.Guid" @click="edit(question)">Edit</p>\n      </div>\n      \n      <div class="input literal">\n        <input type="number" class="date form-control" v-model="question.Answer" />\n      </div>\n    </div>\n  ',extends:o}),Vue.component("email",{template:'\n    <div class="form-question" v-if="display">\n      <div class="question-title" @mousemove="showEdit(question.Guid)" @mouseout="hideEdit(question.Guid)">\n        <p class="required" v-if="question.Required">*</p>\n        <h4>{{ index + 1}}. {{ question.Title }}</h4>\n        <p class="edit" :data-key="question.Guid" @click="edit(question)">Edit</p>\n      </div>\n\n      <div class="input literal">\n        <input type="email" v-model="question.Answer" placeholder="請輸入您的 E-mail" />\n        <div class="line"></div>\n      </div>\n    </div>\n  ',extends:o}),Vue.component("english",{template:'\n    <div class="form-question" v-if="display">\n      <div class="question-title" @mousemove="showEdit(question.Guid)" @mouseout="hideEdit(question.Guid)">\n        <p class="required" v-if="question.Required">*</p>\n        <h4>{{ index + 1}}. {{ question.Title }}</h4>\n        <p class="edit" :data-key="question.Guid" @click="edit(question)">Edit</p>\n      </div>\n\n      <div class="input literal">\n        <input type="english" v-model="question.Answer" placeholder="請輸入英文字母" @change="checkNum" />\n        <div class="line"></div>\n      </div>\n    </div>\n  ',methods:{checkNum:function(){this.question.Answer=this.question.Answer.replace(/[^\a-\z\A-\Z]/g,"")}},extends:o});function s(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function c(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}Vue.component("create-form",{data:function(){return{current:{Guid:null,Title:"",Type:"radio",Options:[],Required:!1},form:{Guid:null,Title:"無標題表單",Description:"",Questions:[]},menuType:[{type:"radio",typeTW:"單選題",iconPath:"icons/outline_radio_button_checked.png"},{type:"checkbox",typeTW:"複選題",iconPath:"icons/outline_check_box.png"},{type:"dropdown",typeTW:"下拉式選單",iconPath:"icons/outline_arrow_drop_down_circle.png"},{type:"literal",typeTW:"簡答",iconPath:"icons/outline_format_align_left.png"},{type:"date",typeTW:"日期",iconPath:"icons/outline_calendar_today.png"},{type:"number",typeTW:"數字",iconPath:"icons/number.png"},{type:"email",typeTW:"信箱",iconPath:"icons/email.png"},{type:"english",typeTW:"英文",iconPath:"icons/english.png"}],clickMenu:!1}},template:'\n    <div>\n      <div id="current-guid">\n        {{ this.current.Guid }}\n      </div>\n\n      <div class="main">\n        <div class="form">\n          <div class="input form-title">\n            <input\n              type="text"\n              v-model="form.Title"\n              placeholder="表單標題"\n              @click="selectTarget"\n            />\n            <div class="line"></div>\n          </div>\n          <div class="input form-description">\n            <input\n              type="text"\n              v-model="form.Description"\n              placeholder="表單說明"\n            />\n            <div class="line"></div>\n          </div>\n          <component\n            v-for="(item, index) in form.Questions"\n            :key="index"\n            :question="item"\n            :index="index"\n            :is="item.Type"\n          ></component>\n        </div>\n\n        <div class="editor">\n          <div class="sidebar">\n            <div class="sidebar-item">\n              <img\n                class="size-24"\n                src="icons/outline_add_circle_outline.png"\n                @click="addQuestion"\n                @mousemove="showTooltip(\'.tooltip-times-circle\')"\n                @mouseout="hideTooltip(\'.tooltip-times-circle\')"\n              />\n              <div class="tooltip-times-circle">\n                <p>新增問題</p>\n              </div>\n            </div>\n            <div class="sidebar-item">\n              <img\n                class="icon-copy size-24"\n                src="icons/outline_file_copy.png"\n                @click="showCurrentGuid"\n                @mousemove="showTooltip(\'.tooltip-fa-copy\')"\n                @mouseout="hideTooltip(\'.tooltip-fa-copy\')"\n              />\n              <div class="tooltip-fa-copy">\n                <p>複製當前題目的 Guid</p>\n              </div>\n            </div>\n          </div>\n\n          <div class="title-and-menu">\n            <div class="input title">\n              <input type="text" v-model="current.Title" placeholder="問題" />\n              <div class="line"></div>\n            </div>\n\n            <div class="menu">\n              <div class="current-menu" v-if="!clickMenu" @click="showMenu">\n                <img class="size-24" :src="currentType.iconPath" />\n                <p>{{ currentType.typeTW }}</p>\n                <img class="size-24 ml-auto" src="icons/outline_arrow_drop_down.png" />\n              </div>\n\n              <div class="menu-list" v-else>\n                <div\n                  class="current-menu"\n                  v-for="(item, index) in menuType"\n                  :key="index"\n                  @click="switchMenu(item, index)"\n                >\n                  <img class="size-24" :src="item.iconPath" />\n                  <p>{{ item.typeTW }}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="options">\n            <div\n              class="option"\n              v-for="(item, index) in current.Options"\n              :key="index"\n              @mousemove="showRemoveIcon(item)"\n              @mouseout="hideRemoveIcon(item)"\n            >\n              <div class="option-icon">\n                <img\n                  class="size-24"\n                  src="icons/outline_radio_button_checked.png"\n                  v-if="current.Type === \'radio\'"\n                />\n                <img\n                  class="size-24"\n                  src="icons/outline_check_box.png"\n                  v-else-if="current.Type === \'checkbox\'"\n                />\n                <p v-else-if="current.Type === \'dropdown\'">{{ index + 1 }}.</p>\n              </div>\n              <div class="input option-input" v-if="!status">\n                <input type="text" :data-key="item.Guid" v-model="item.Value" />\n                <div class="line"></div>\n              </div>\n              <div\n                class="icon-cross"\n                :data-key="item.Guid"\n                @click="removeOption(index)"\n              ></div>\n            </div>\n\n            <div class="option">\n              <div class="ques-icon">\n                <img\n                  class="size-24"\n                  src="icons/outline_radio_button_checked.png"\n                  v-if="current.Type === \'radio\'"\n                />\n                <img\n                  class="size-24"\n                  src="icons/outline_check_box.png"\n                  v-else-if="current.Type === \'checkbox\'"\n                />\n                <p v-else-if="current.Type === \'dropdown\'">\n                  {{ current.Options.length + 1 }}.\n                </p>\n                <label v-else-if="current.Type === \'literal\'">簡答文字</label>\n                <label v-else-if="current.Type === \'date\'">日期</label>\n                <label v-else-if="current.Type === \'number\'">數字</label>\n                <label v-else-if="current.Type === \'email\'">信箱</label>\n                <label v-else-if="current.Type === \'english\'">英文</label>\n              </div>\n              <div class="input option-input" v-if="!status">\n                <input\n                  type="text"\n                  @click="addNewOption"\n                  @keydown="addNewOption"\n                  placeholder="新增選項"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div class="functions">\n            <img\n              class="size-24 ml-auto"\n              src="icons/outline_delete.png"\n              @click="removeQuestion"\n            />\n\n            <div class="separationLine"></div>\n            <div class="switch-area">\n              <p>必填</p>\n              <input\n                type="checkbox"\n                id="toggle"\n                class="offscreen"\n                v-model="current.Required"\n              />\n              <label for="toggle" class="switch"></label>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  ',methods:{addNewOption:function(){var e=this.randomGuid();this.current.Options.push({Guid:e,Value:"選項 ".concat(this.current.Options.length+1),Binding:[]}),Vue.nextTick((function(){var n=document.querySelector('input[data-key="'.concat(e,'"]'));n.focus(),n.select()}))},removeOption:function(e){this.current.Options.splice(e,1)},addQuestion:function(){if("number"==typeof this.current.index){var e=this.current.index;delete this.current.index,this.form.Questions.splice(e,0,this.current)}else this.form.Questions.push(function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?s(i,!0).forEach((function(n){c(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(i).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({},this.current,{Answer:"checkbox"===this.current.Type?[]:""}));this.current={Guid:this.randomGuid(),Type:"radio",Title:"",Options:[{Guid:this.randomGuid(),Value:"選項 1",Binding:[]}],Required:!1}},removeQuestion:function(){void 0!==this.current.index?this.current={Guid:this.randomGuid(),Type:"radio",Title:"",Options:[{Guid:this.randomGuid(),Value:"選項 1",Binding:[]}],Required:!1}:alert("此題為當前編輯之題目，無法刪除")},showTooltip:function(e){document.querySelector(e).style.display="block"},hideTooltip:function(e){document.querySelector(e).style.display="none"},selectTarget:function(e){e.target.select()},randomGuid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1).toUpperCase()}return"".concat(e()).concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())},showCurrentGuid:function(){var e=document.getElementById("current-guid"),n=document.createRange();n.selectNode(e);var i=window.getSelection();i.removeAllRanges(),i.addRange(n),document.execCommand("copy");var t=document.querySelector(".icon-copy");t.classList.add("apple"),setTimeout((function(){t.classList.remove("apple")}),300)},showRemoveIcon:function(e){document.querySelector('div[data-key="'.concat(e.Guid,'"]')).style.display="block"},hideRemoveIcon:function(e){document.querySelector('div[data-key="'.concat(e.Guid,'"]')).style.display="none"},showMenu:function(){this.clickMenu=!0},hideMenu:function(e){var n=document.querySelector(".menu-list");e.target!==n&&(this.clickMenu=!1)},switchMenu:function(e,n){this.clickMenu=!1,this.current.Type=e.type;var i=document.querySelector(".menu-list");"radio"===e.type?i.style.top="0px":"checkbox"===e.type?i.style.top="-42px":"dropdown"===e.type?i.style.top="-84px":"literal"===e.type?i.style.top="-126px":"date"===e.type?i.style.top="-168px":"number"===e.type?i.style.top="-210px":"email"===e.type?i.style.top="-252px":"english"===e.type&&(i.style.top="-294px"),"literal"!==this.current.Type&&"date"!==this.current.Type&&"number"!==this.current.Type&&"email"!==this.current.Type&&"english"!==this.current.Type||(this.current.Options=[])},getFormJSON:function(){return this.form.Questions.forEach((function(e){"string"==typeof e.Answer&&(e.Answer=[])})),JSON.stringify(this.form)},reEditForm:function(e){e.Questions.forEach((function(e){e.Answer="checkbox"!==e.Type?"":[]})),this.form=e}},computed:{currentType:function(){return"radio"===this.current.Type?{typeTW:"單選題",iconPath:"icons/outline_radio_button_checked.png"}:"checkbox"===this.current.Type?{typeTW:"複選題",iconPath:"icons/outline_check_box.png"}:"dropdown"===this.current.Type?{typeTW:"下拉式選單",iconPath:"icons/outline_arrow_drop_down_circle.png"}:"literal"===this.current.Type?{typeTW:"簡答",iconPath:"icons/outline_format_align_left.png"}:"date"===this.current.Type?{typeTW:"日期",iconPath:"icons/outline_calendar_today.png"}:"number"===this.current.Type?{typeTW:"數字",iconPath:"icons/number.png"}:"email"===this.current.Type?{typeTW:"信箱",iconPath:"icons/email.png"}:"english"===this.current.Type?{typeTW:"英文",iconPath:"icons/english.png"}:void 0},status:function(){return"literal"===this.current.Type||"date"===this.current.Type||"number"===this.current.Type||"email"===this.current.Type||"english"===this.current.Type}},created:function(){this.current.Options.push({Guid:this.randomGuid(),Value:"選項 ".concat(this.current.Options.length+1),Binding:[]})},mounted:function(){var e=this;setTimeout((function(){e.form.Guid=e.randomGuid(),e.current.Guid=e.randomGuid()}),250)}});var u=new Vue({el:"#app"});window.jun={getCreateFormJS:u.$refs.apple.getFormJSON,reEditForm:u.$refs.apple.reEditForm}}]);